<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: betedra_end_to_end_flows Pages: 1 -->
<svg width="884pt" height="447pt"
 viewBox="0.00 0.00 884.00 447.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 443)">
<title>betedra_end_to_end_flows</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-443 880,-443 880,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_pred</title>
<polygon fill="white" stroke="#93c5fd" points="8,-91 8,-431 419,-431 419,-91 8,-91"/>
<text text-anchor="middle" x="213.5" y="-415.8" font-family="Times,serif" font-size="14.00">Prediction Flow (HBAR/USDC — every 5 minutes)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_lotto</title>
<polygon fill="white" stroke="#86efac" points="662,-8 662,-431 868,-431 868,-8 662,-8"/>
<text text-anchor="middle" x="765" y="-415.8" font-family="Times,serif" font-size="14.00">Lotto Flow (PRNG Draw)</text>
</g>
<!-- S0 -->
<g id="node1" class="node">
<title>S0</title>
<path fill="#f8fafc" stroke="#0b1020" d="M326,-400C326,-400 220,-400 220,-400 214,-400 208,-394 208,-388 208,-388 208,-376 208,-376 208,-370 214,-364 220,-364 220,-364 326,-364 326,-364 332,-364 338,-370 338,-376 338,-376 338,-388 338,-388 338,-394 332,-400 326,-400"/>
<text text-anchor="middle" x="273" y="-379.2" font-family="Helvetica,sans-Serif" font-size="11.00">startGenesisRound()</text>
</g>
<!-- S1 -->
<g id="node2" class="node">
<title>S1</title>
<path fill="#f8fafc" stroke="#0b1020" d="M399,-313C399,-313 213,-313 213,-313 207,-313 201,-307 201,-301 201,-301 201,-289 201,-289 201,-283 207,-277 213,-277 213,-277 399,-277 399,-277 405,-277 411,-283 411,-289 411,-289 411,-301 411,-301 411,-307 405,-313 399,-313"/>
<text text-anchor="middle" x="306" y="-298.2" font-family="Helvetica,sans-Serif" font-size="11.00">lockGenesisRound()</text>
<text text-anchor="middle" x="306" y="-286.2" font-family="Helvetica,sans-Serif" font-size="11.00">lockPrice ← Pyth (fresh/confidence)</text>
</g>
<!-- S0&#45;&gt;S1 -->
<g id="edge1" class="edge">
<title>S0&#45;&gt;S1</title>
<path fill="none" stroke="black" d="M279.68,-363.8C284.24,-352.05 290.38,-336.24 295.58,-322.84"/>
<polygon fill="black" stroke="black" points="298.98,-323.76 299.33,-313.18 292.45,-321.23 298.98,-323.76"/>
<text text-anchor="middle" x="360" y="-334.8" font-family="Times,serif" font-size="14.00">wait intervalBlocks</text>
</g>
<!-- S2 -->
<g id="node3" class="node">
<title>S2</title>
<path fill="#f8fafc" stroke="#0b1020" d="M325,-226C325,-226 221,-226 221,-226 215,-226 209,-220 209,-214 209,-214 209,-194 209,-194 209,-188 215,-182 221,-182 221,-182 325,-182 325,-182 331,-182 337,-188 337,-194 337,-194 337,-214 337,-214 337,-220 331,-226 325,-226"/>
<text text-anchor="middle" x="273" y="-213.2" font-family="Helvetica,sans-Serif" font-size="11.00">executeRound()</text>
<text text-anchor="middle" x="273" y="-201.2" font-family="Helvetica,sans-Serif" font-size="11.00">closePrice ← Pyth</text>
<text text-anchor="middle" x="273" y="-189.2" font-family="Helvetica,sans-Serif" font-size="11.00">settle • emit events</text>
</g>
<!-- S1&#45;&gt;S2 -->
<g id="edge2" class="edge">
<title>S1&#45;&gt;S2</title>
<path fill="none" stroke="black" d="M299.64,-276.84C295.33,-265.21 289.51,-249.53 284.41,-235.77"/>
<polygon fill="black" stroke="black" points="287.62,-234.35 280.86,-226.19 281.05,-236.78 287.62,-234.35"/>
<text text-anchor="middle" x="361" y="-247.8" font-family="Times,serif" font-size="14.00">wait intervalBlocks</text>
</g>
<!-- S3 -->
<g id="node4" class="node">
<title>S3</title>
<path fill="#f8fafc" stroke="#0b1020" d="M316.5,-135C316.5,-135 229.5,-135 229.5,-135 223.5,-135 217.5,-129 217.5,-123 217.5,-123 217.5,-111 217.5,-111 217.5,-105 223.5,-99 229.5,-99 229.5,-99 316.5,-99 316.5,-99 322.5,-99 328.5,-105 328.5,-111 328.5,-111 328.5,-123 328.5,-123 328.5,-129 322.5,-135 316.5,-135"/>
<text text-anchor="middle" x="273" y="-114.2" font-family="Helvetica,sans-Serif" font-size="11.00">claim(roundIds[])</text>
</g>
<!-- S2&#45;&gt;S3 -->
<g id="edge3" class="edge">
<title>S2&#45;&gt;S3</title>
<path fill="none" stroke="black" d="M273,-181.99C273,-170.92 273,-157.22 273,-145.34"/>
<polygon fill="black" stroke="black" points="276.5,-145.06 273,-135.06 269.5,-145.06 276.5,-145.06"/>
</g>
<!-- N -->
<g id="node11" class="node">
<title>N</title>
<path fill="#e0f2fe" stroke="#0b1020" d="M640.5,-145C640.5,-145 439.5,-145 439.5,-145 433.5,-145 427.5,-139 427.5,-133 427.5,-133 427.5,-101 427.5,-101 427.5,-95 433.5,-89 439.5,-89 439.5,-89 640.5,-89 640.5,-89 646.5,-89 652.5,-95 652.5,-101 652.5,-101 652.5,-133 652.5,-133 652.5,-139 646.5,-145 640.5,-145"/>
<text text-anchor="middle" x="540" y="-132.2" font-family="Helvetica,sans-Serif" font-size="11.00">Fairness:</text>
<text text-anchor="middle" x="540" y="-120.2" font-family="Helvetica,sans-Serif" font-size="11.00">• Pyth freshness &amp; confidence checks</text>
<text text-anchor="middle" x="540" y="-108.2" font-family="Helvetica,sans-Serif" font-size="11.00">• Small buffers around lock/close</text>
<text text-anchor="middle" x="540" y="-96.2" font-family="Helvetica,sans-Serif" font-size="11.00">• Cancel round if no valid oracle</text>
</g>
<!-- S2&#45;&gt;N -->
<g id="edge9" class="edge">
<title>S2&#45;&gt;N</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M337.29,-182.53C369.59,-172.25 409.36,-159.59 445.1,-148.21"/>
<polygon fill="black" stroke="black" points="446.59,-151.41 455.06,-145.04 444.47,-144.74 446.59,-151.41"/>
</g>
<!-- S4 -->
<g id="node5" class="node">
<title>S4</title>
<path fill="#f8fafc" stroke="#0b1020" d="M170.5,-313C170.5,-313 27.5,-313 27.5,-313 21.5,-313 15.5,-307 15.5,-301 15.5,-301 15.5,-289 15.5,-289 15.5,-283 21.5,-277 27.5,-277 27.5,-277 170.5,-277 170.5,-277 176.5,-277 182.5,-283 182.5,-289 182.5,-289 182.5,-301 182.5,-301 182.5,-307 176.5,-313 170.5,-313"/>
<text text-anchor="middle" x="99" y="-292.2" font-family="Helvetica,sans-Serif" font-size="11.00">Cron: executeRound() (5m)</text>
</g>
<!-- S4&#45;&gt;S2 -->
<g id="edge4" class="edge">
<title>S4&#45;&gt;S2</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M132.55,-276.84C158.12,-263.76 193.76,-245.53 222.74,-230.71"/>
<polygon fill="black" stroke="black" points="224.58,-233.7 231.89,-226.03 221.39,-227.47 224.58,-233.7"/>
</g>
<!-- L0 -->
<g id="node6" class="node">
<title>L0</title>
<path fill="#f8fafc" stroke="#0b1020" d="M826,-400C826,-400 704,-400 704,-400 698,-400 692,-394 692,-388 692,-388 692,-376 692,-376 692,-370 698,-364 704,-364 704,-364 826,-364 826,-364 832,-364 838,-370 838,-376 838,-376 838,-388 838,-388 838,-394 832,-400 826,-400"/>
<text text-anchor="middle" x="765" y="-385.2" font-family="Helvetica,sans-Serif" font-size="11.00">buyTickets(lotteryId, n)</text>
<text text-anchor="middle" x="765" y="-373.2" font-family="Helvetica,sans-Serif" font-size="11.00">value = 5 HBAR * n</text>
</g>
<!-- L1 -->
<g id="node7" class="node">
<title>L1</title>
<path fill="#f8fafc" stroke="#0b1020" d="M817,-313C817,-313 713,-313 713,-313 707,-313 701,-307 701,-301 701,-301 701,-289 701,-289 701,-283 707,-277 713,-277 713,-277 817,-277 817,-277 823,-277 829,-283 829,-289 829,-289 829,-301 829,-301 829,-307 823,-313 817,-313"/>
<text text-anchor="middle" x="765" y="-292.2" font-family="Helvetica,sans-Serif" font-size="11.00">sales window closes</text>
</g>
<!-- L0&#45;&gt;L1 -->
<g id="edge5" class="edge">
<title>L0&#45;&gt;L1</title>
<path fill="none" stroke="black" d="M765,-363.8C765,-352.16 765,-336.55 765,-323.24"/>
<polygon fill="black" stroke="black" points="768.5,-323.18 765,-313.18 761.5,-323.18 768.5,-323.18"/>
</g>
<!-- L2 -->
<g id="node8" class="node">
<title>L2</title>
<path fill="#f8fafc" stroke="#0b1020" d="M841,-222C841,-222 689,-222 689,-222 683,-222 677,-216 677,-210 677,-210 677,-198 677,-198 677,-192 683,-186 689,-186 689,-186 841,-186 841,-186 847,-186 853,-192 853,-198 853,-198 853,-210 853,-210 853,-216 847,-222 841,-222"/>
<text text-anchor="middle" x="765" y="-207.2" font-family="Helvetica,sans-Serif" font-size="11.00">lottoDraw()</text>
<text text-anchor="middle" x="765" y="-195.2" font-family="Helvetica,sans-Serif" font-size="11.00">seed ← IPrngSystemContract</text>
</g>
<!-- L1&#45;&gt;L2 -->
<g id="edge6" class="edge">
<title>L1&#45;&gt;L2</title>
<path fill="none" stroke="black" d="M765,-276.84C765,-264.28 765,-246.98 765,-232.5"/>
<polygon fill="black" stroke="black" points="768.5,-232.11 765,-222.11 761.5,-232.11 768.5,-232.11"/>
</g>
<!-- L3 -->
<g id="node9" class="node">
<title>L3</title>
<path fill="#f8fafc" stroke="#0b1020" d="M847.5,-135C847.5,-135 682.5,-135 682.5,-135 676.5,-135 670.5,-129 670.5,-123 670.5,-123 670.5,-111 670.5,-111 670.5,-105 676.5,-99 682.5,-99 682.5,-99 847.5,-99 847.5,-99 853.5,-99 859.5,-105 859.5,-111 859.5,-111 859.5,-123 859.5,-123 859.5,-129 853.5,-135 847.5,-135"/>
<text text-anchor="middle" x="765" y="-114.2" font-family="Helvetica,sans-Serif" font-size="11.00">derive winners • emit LottoWin</text>
</g>
<!-- L2&#45;&gt;L3 -->
<g id="edge7" class="edge">
<title>L2&#45;&gt;L3</title>
<path fill="none" stroke="black" d="M765,-185.8C765,-174.16 765,-158.55 765,-145.24"/>
<polygon fill="black" stroke="black" points="768.5,-145.18 765,-135.18 761.5,-145.18 768.5,-145.18"/>
</g>
<!-- L4 -->
<g id="node10" class="node">
<title>L4</title>
<path fill="#f8fafc" stroke="#0b1020" d="M803.5,-52C803.5,-52 726.5,-52 726.5,-52 720.5,-52 714.5,-46 714.5,-40 714.5,-40 714.5,-28 714.5,-28 714.5,-22 720.5,-16 726.5,-16 726.5,-16 803.5,-16 803.5,-16 809.5,-16 815.5,-22 815.5,-28 815.5,-28 815.5,-40 815.5,-40 815.5,-46 809.5,-52 803.5,-52"/>
<text text-anchor="middle" x="765" y="-31.2" font-family="Helvetica,sans-Serif" font-size="11.00">claim(lotteryId)</text>
</g>
<!-- L3&#45;&gt;L4 -->
<g id="edge8" class="edge">
<title>L3&#45;&gt;L4</title>
<path fill="none" stroke="black" d="M765,-98.82C765,-88.19 765,-74.31 765,-62.2"/>
<polygon fill="black" stroke="black" points="768.5,-62.15 765,-52.15 761.5,-62.15 768.5,-62.15"/>
</g>
</g>
</svg>
